@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Base typography and background for an elegant dark UI */
  :root {
    --app-bg: #121316; /* fallback dark grey */
    --muted-text: #9aa6af;
    --heading-text: #f8fafc;
    --primary-500: #24c6e6;
    --primary-600: #1ea6c8;
    --primary-accent: #4fd5f2;
    --primary-700: #178b9d;
    --primary-400: #45dff0;
    --primary-300: #7feff7;
    --primary-100: rgba(79,213,242,0.06);
    --neon-glow: rgba(36,198,230,0.12);
    --card-bg: #0f1112;
    --secondary-900: #0b0c0d;
    --secondary-800: #141516;
    --secondary-700: #1f2123;
  }

  body {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    font-size: 16px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background-color: var(--app-bg);
    color: var(--heading-text);
    -webkit-font-smoothing: antialiased;
  }

  html {
    color-scheme: dark;
  }
}

@layer components {
  .chat-message {
    @apply rounded-2xl p-4 mb-3 animate-fade-in;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
                box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .chat-message:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  html.dark .chat-message:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  }
  
  .chat-message-user {
    @apply bg-primary-600 text-white ml-auto max-w-[80%];
    box-shadow: 0 6px 18px rgba(36, 198, 230, 0.18);
  }
  
  .chat-message-user:hover {
    box-shadow: 0 8px 24px rgba(14, 165, 233, 0.3);
  }
  
  .chat-message-assistant {
    @apply bg-secondary-900 border border-secondary-800 max-w-[85%];
  }
  
  /* Primary button: satin gradient with neon accent + states */
  .button-primary {
    @apply text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-all duration-150 inline-flex items-center justify-center gap-2;
    background-image: linear-gradient(90deg, rgba(79,213,242,0.12), rgba(36,198,230,0.18));
    border: 1px solid rgba(36,198,230,0.28);
  }

  .button-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 24px rgba(36,198,230,0.12);
  }

  .button-primary:active {
    transform: translateY(0);
    box-shadow: 0 4px 12px rgba(36,198,230,0.08);
  }

  .button-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  /* Secondary button: muted on dark bg */
  .button-secondary {
    @apply text-secondary-500 font-medium py-2 px-4 rounded-lg border transition-colors duration-150 inline-flex items-center justify-center gap-2;
    background-color: transparent;
    border-color: rgba(255,255,255,0.04);
  }

  .button-secondary:hover {
    background-color: rgba(255,255,255,0.02);
  }

  /* Loading spinner */
  .spinner {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.12);
    border-top-color: rgba(79,213,242,0.95);
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  /* Tooltip base */
  .tooltip {
    position: relative;
    display: inline-block;
  }

  .tooltip .tooltip-content {
    visibility: hidden;
    background-color: rgba(12,14,16,0.9);
    color: #f8fafc;
    text-align: center;
    padding: 6px 8px;
    border-radius: 6px;
    position: absolute;
    z-index: 60;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    white-space: nowrap;
    font-size: 12px;
    opacity: 0;
    transition: opacity 0.12s ease-in-out, transform 0.12s ease-in-out;
  }

  .tooltip:hover .tooltip-content {
    visibility: visible;
    opacity: 1;
    transform: translateX(-50%) translateY(-4px);
  }
  
  .input-field {
    @apply w-full px-4 py-3 rounded-lg focus:outline-none bg-secondary-950 text-secondary-100 border border-secondary-800;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
  }

  .input-field:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(36,198,230,0.12);
    border-color: rgba(36,198,230,0.24);
  }
  
  .card {
    @apply bg-secondary-900 rounded-xl shadow-md border border-secondary-800 p-6;
  }

  /* Header/branding helpers */
  .branding-heading {
    color: var(--heading-text);
    font-weight: 700;
    letter-spacing: -0.01em;
  }

  .no-transition {
    transition: none !important;
  }
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-secondary-100 dark:bg-secondary-800;
}

::-webkit-scrollbar-thumb {
  @apply bg-secondary-400 dark:bg-secondary-600 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-secondary-500 dark:bg-secondary-500;
}

/* Markdown content styling */
.markdown-content {
  @apply prose prose-sm prose-slate dark:prose-invert max-w-none;
  @apply prose-headings:font-bold prose-headings:text-secondary-900 dark:prose-headings:text-secondary-50;
  @apply prose-p:text-secondary-700 dark:prose-p:text-secondary-300 prose-p:leading-relaxed;
  @apply prose-a:text-primary-500 dark:prose-a:text-primary-400 prose-a:no-underline hover:prose-a:underline;
  @apply prose-strong:text-secondary-900 dark:prose-strong:text-secondary-50 prose-strong:font-semibold;
  @apply prose-code:bg-secondary-100 dark:prose-code:bg-secondary-700 prose-code:text-secondary-800 dark:prose-code:text-secondary-200 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded prose-code:text-sm;
  @apply prose-pre:bg-secondary-900 dark:prose-pre:bg-secondary-950 prose-pre:text-secondary-100 dark:prose-pre:text-secondary-100;
  @apply prose-blockquote:border-l-primary-500 prose-blockquote:text-secondary-700 dark:prose-blockquote:text-secondary-300;
  @apply prose-ul:text-secondary-700 dark:prose-ul:text-secondary-300 prose-ol:text-secondary-700 dark:prose-ol:text-secondary-300;
  @apply prose-li:text-secondary-700 dark:prose-li:text-secondary-300;
}

/* Shimmer animation for suggestions */
@keyframes shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

.suggestion-shimmer {
  position: relative;
  overflow: hidden;
  background: linear-gradient(
    90deg,
    transparent 0%,
    transparent 40%,
    rgba(255, 255, 255, 0.6) 50%,
    transparent 60%,
    transparent 100%
  );
  background-size: 200% 100%;
  background-position: -200% center;
}

html.dark .suggestion-shimmer {
  background: linear-gradient(
    90deg,
    transparent 0%,
    transparent 40%,
    rgba(0, 0, 0, 0.3) 50%,
    transparent 60%,
    transparent 100%
  );
}

.suggestion-shimmer:hover {
  animation: shimmer 1.5s ease-in-out;
}

/* Tab content transitions */
.tab-content {
  animation: fadeSlideIn 0.3s ease-out;
}

@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Small/toggle helpers using design tokens */
.toggle-on {
  background-color: var(--primary-500);
}

.toggle-off {
  background-color: rgba(255,255,255,0.04);
}

.small-button {
  @apply text-xs font-medium px-3 py-1.5 rounded-md inline-flex items-center gap-2;
}

.small-button-primary {
  background-color: var(--primary-500);
  color: white;
  border: 1px solid rgba(36,198,230,0.18);
}

.small-button-secondary {
  background-color: transparent;
  color: var(--muted-text);
  border: 1px solid rgba(255,255,255,0.04);
}

/* Focus and drag helpers that use design tokens */
.focus-primary:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(36,198,230,0.12);
  border-color: rgba(36,198,230,0.24);
}

.is-dragging-ring {
  box-shadow: 0 0 0 3px rgba(36,198,230,0.12) !important;
}

.accent-selected {
  background-color: var(--neon-glow);
  color: var(--primary-500);
}

.accent-hover:hover {
  border-color: var(--primary-500);
  background-color: var(--neon-glow);
  color: var(--primary-500);
}

/* 12-column grid system
   - Columns: 12
   - Gutter: 24px
   - Centered layout on large screens: fixed column width 72px
   - Stretch layout on medium screens: columns share available width
*/
.grid-12 {
  display: grid;
  gap: 24px;
  width: 100%;
}

/* Centered: fixed 72px columns, max width computed from columns+gutters */
.grid-12.center {
  grid-template-columns: repeat(12, 72px);
  max-width: calc(12 * 72px + 11 * 24px);
  margin-left: auto;
  margin-right: auto;
}

/* Stretch: medium screens use fractional columns to stretch */
@media (max-width: 1023px) {
  .grid-12.center {
    grid-template-columns: repeat(12, minmax(0, 1fr));
    max-width: 100%;
    padding-left: 24px;
    padding-right: 24px;
  }
}

/* Column span helpers (col-span-1 .. col-span-12) */
.col-span-1 { grid-column: span 1 / span 1; }
.col-span-2 { grid-column: span 2 / span 2; }
.col-span-3 { grid-column: span 3 / span 3; }
.col-span-4 { grid-column: span 4 / span 4; }
.col-span-5 { grid-column: span 5 / span 5; }
.col-span-6 { grid-column: span 6 / span 6; }
.col-span-7 { grid-column: span 7 / span 7; }
.col-span-8 { grid-column: span 8 / span 8; }
.col-span-9 { grid-column: span 9 / span 9; }
.col-span-10 { grid-column: span 10 / span 10; }
.col-span-11 { grid-column: span 11 / span 11; }
.col-span-12 { grid-column: span 12 / span 12; }

/* Utility to constrain content inside a grid cell */
.grid-cell {
  min-width: 0;
}
